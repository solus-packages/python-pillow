name       : python-pillow
version    : 5.1.0
release    : 16
source     :
    - https://github.com/python-pillow/Pillow/archive/5.1.0.tar.gz : de34dfb23981fd94fa8b4b3b5fd3641082de9e618b2a8bbd66ce846d09eba9a0
license    : MIT
component  : programming.python
summary    : The friendly PIL fork (Python Imaging Library)
description: |
    Pillow is the "friendly PIL fork" by Alex Clark and Contributors. PIL is the Python Imaging Library by Fredrik Lundh and Contributors.
builddeps  :
    - pkgconfig(freetype2)
    - pkgconfig(lcms2)
    - pkgconfig(libopenjp2)
    - pkgconfig(libtiff-4)
    - pkgconfig(libturbojpeg)
    - pkgconfig(libwebp)
    - pkgconfig(python3)
    - pkgconfig(tk)
    - python-pytest
    - python-setuptools
rundeps    :
    - libjpeg-turbo
build      : |
    %python_setup
    %python3_setup
install    : |
    %python_install
    %python3_install
    for py in 2.7 3.6m; do
        install -dm00755 $installdir/usr/include/python${py}/
        install -m00644 src/libImaging/*.h $installdir/usr/include/python${py}/
    done
check     : |
    pushd $PKG_BUILD_DIR/py2build
        export PYTHONPATH=$PWD/build/lib.linux-x86_64-2.7
        python selftest.py
        py.test
    popd

    pushd $PKG_BUILD_DIR/py3build
        export PYTHONPATH=$PWD/build/lib.linux-x86_64-3.6
        python3 selftest.py
        py.test3
    popd
